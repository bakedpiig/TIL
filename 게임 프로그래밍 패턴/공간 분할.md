# 공간 분할
## 공간 분할의 용도
공간의 객체를 효과적으로 찾기 위해서 객체 위치에 따라 구성되는 자료구조에 저장한다.

## 패턴
* 공간 위에 있는 객체들을 위치에 따라 공간 자료구조에 저장한다.
* 객체 위치가 바뀌면 공간 자료구조도 업데이트한다.

## 써야 하는 상황
* 위치 값이 있는 객체가 많다.
* 위치에 따라 객체를 찾는 질의가 성능에 영향을 준다.

## 주의 사항
* 객체가 별로 없다면 의미가 없을 수도 있다.
* 객체의 위치 변경을 처리하는 데에 코드가 더 복잡해진다.
* 메모리를 더 많이 소비한다.

## 디자인 결정
* 공간을 나누는 방법
    * 균등하게 나눔
        * 단순하다.
        * 메모리 사용량이 일정하다.
        * 객체가 위치를 이동할 때 자료구조의 업데이트 속도가 빠르다.
    * 계층적으로 나눔
        * 빈 공간을 효율적으로 처리할 수 있다.
        * 밀집된 영역도 효과적으로 처리할 수 있다.

* 객체 개수와 분할 횟수의 연관성
    * 상관없이 분할
        * 객체는 순차적으로 추가될 수 있다.
        * 객체가 빠르게 이동할 수 있다.
        * 영역이 균형 잡혀 있지 않을 수 있다.
    * 객체 개수에 따라 다르게 분할
        * 영역이 균형 잡힐 수 있다.
        * 전체 객체에 대해 한 번에 분할해놓는 게 훨씬 효과적이다.
    * 영역 분할 - 고정, 계층 - 연관
        * 객체는 순차적으로 추가될 수 있다.
        * 객체 이동이 빠르다.
        * 분할 영역이 균형 잡혀 있다.

* 객체의 컬렉션
    * 공간 분할 자료구조에만
        * 메모리 비용과 복잡도가 줄어든다.
    * 다른 컬렉션에도 둠
        * 전체 객체를 더 빠르게 순회할 수 있다.