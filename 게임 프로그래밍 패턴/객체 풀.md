# 객체 풀
## 객체 풀의 용도
객체를 매번 할당, 해제하지 않고 고정 크기 풀에 들어 있는 객체를 재사용한다.

## 패턴
* 재사용 가능한 객체를 모아놓는 풀 클래스를 정의한다.
* 풀 클래스에 들어가는 객체들은 자신이 사용 중인지 알 수 있는 방법을 제공한다.
* 풀은 초기화될 때 객체들을 미리 생성하고 '사용 안 함' 상태로 초기화한다.
* 새로운 객체가 필요할 때 풀에 요청하면 사용 가능한 객체를 찾아 '사용 중'으로 변경 뒤 반환한다.
* 객체를 사용하지 않는다면 '사용 안 함' 상태로 되돌린다.

## 써야 하는 상황
* 객체를 빈번하게 생성/삭제해야 한다.
* 객체들의 크기가 비슷하다.
* 객체를 힙에 생성하기가 느리거나 단편화가 우려된다.
* 접근 비용이 비싸면서 재사용 가능한 자원을 객체가 캡슐화하고 있다.

## 주의 사항
* 풀의 크기를 적절하게 조절해야 한다.
* 한 번에 사용 가능한 객체 개수가 정해져 있다.
* 객체를 위한 메모리 크기가 고정된다.
    * 객체의 크기별로 풀을 나눠서 해결할 수 있다.
* 재사용되는 객체는 완전히 초기화해 주어야 한다.
* 사용 중이지 않은 객체도 메모리에 남아 있다.

## 디자인 결정
* 풀과 객체의 커플링 여부
    * 커플링
        * 간단하게 구현할 수 있다.
        * 객체가 풀을 통해서만 생성할 수 있도록 강제할 수 있다.
        * 플래그가 꼭 필요하지 않을 수 있다.
    * 커플링되지 않음
        * 어떤 객체라도 풀에 넣을 수 있다.
        * 사용 여부 상태를 객체 외부에서 관리해야 한다.

* 재사용 객체의 초기화의 위치
    * 풀 안
        * 풀은 객체를 완전히 캡슐화할 수 있다.
        * 풀 클래스는 객체가 초기화되는 방법과 결합된다.
    * 풀 밖
        * 풀의 인터페이스가 단순해진다.
        * 외부 코드에서 객체 생성이 실패할 때의 처리를 챙겨야 할 수 있다.
